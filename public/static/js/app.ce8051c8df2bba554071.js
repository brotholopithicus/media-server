webpackJsonp([1],{"+99U":function(t,e,n){"use strict";var a=n("fZjL"),s=n.n(a),i=n("czmY");e.a={name:"Show",props:["title","files"],data:function(){return{activeSeason:"1"}},components:{FileCard:i.a},computed:{seasons:function(){var t=this.files.reduce(function(t,e){return t.hasOwnProperty(e.info.season)?t[e.info.season].push(e):t[e.info.season]=[e],t},{});return s()(t).forEach(function(e){t[e]=t[e].sort(function(t,e){return t.info.number-e.info.number})}),t}}}},"2zsr":function(t,e){},"47eL":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("img",{staticClass:"card-img-top",attrs:{src:t.file.info.image,alt:"episode image"}}),t._v(" "),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text"},[t._v("S"+t._s(t.pad(t.file.info.season))+"E"+t._s(t.pad(t.file.info.number)))]),t._v(" "),n("h4",{staticClass:"card-title"},[t._v(t._s(t.file.info.name))]),t._v(" "),n("p",{staticClass:"card-text"},[t._v(t._s(t.file.info.summary))]),t._v(" "),n("div",{staticClass:"button-group"},[n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(){return t.watch(t.file)}}},[t._v("Watch")]),t._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(){return t.copy(t.file)}}},[t._v("âœ‚")])])]),t._v(" "),n("div",{staticClass:"card-footer"},[n("small",{staticClass:"text-muted"},[t._v(t._s((1e-6*t.file.size).toFixed(0))+" MB")])])])},s=[],i={render:a,staticRenderFns:s};e.a=i},"9E6S":function(t,e){},APWZ:function(t,e,n){"use strict";var a=n("//Fk"),s=n.n(a),i=n("Gu7T"),o=n.n(i),r=function(t){return(1e-6*t).toFixed(2)};e.a={name:"Upload",data:function(){return{deleteSelect:[],files:[],submitButtonDisabled:!1,uploadFiles:[],progress:0,speed:"",elapsed:"",uploaded:""}},methods:{updateFiles:function(t){this.uploadFiles=t.target.files},fetchFiles:function(){var t=this;fetch("/api").then(function(t){return t.json()}).then(function(e){t.files=e})},handleFormSubmission:function(t){var e=this;if(this.uploadFiles.length){var n=Date.now();this.submitButtonDisabled=!0;var a=new FormData,s=new XMLHttpRequest;console.log(this.uploadFiles),[].concat(o()(this.uploadFiles)).forEach(function(t){return a.append("video",t,t.name)}),s.open("POST","/api",!0),s.upload.addEventListener("progress",function(t){if(t.lengthComputable){var a=t.loaded,s=t.total;e.progress=Math.round(100*a/s);var i=(Date.now()-n)/1e3,o=(r(a)/i).toFixed(2);e.speed=o+" MB/s",e.elapsed=i.toFixed(2)+" s";var l=r(a).slice(0,-3),c=r(s).slice(0,-3);e.uploaded=l+" MB of "+c+" MB"}}),["error","abort"].forEach(function(t){return s.upload.addEventListener(t,e.handleFormSubmissionError)}),s.addEventListener("load",function(){e.submitButtonDisabled=!1,e.uploadFiles=[],e.progress=0,e.speed="",e.elapsed="",e.uploaded="",e.fetchFiles()}),s.send(a)}},handleFormSubmissionError:function(t){console.log(t)},handleDeleteSubmission:function(){var t=this;return s.a.all(this.deleteSelect.map(function(t){return fetch("/api/video/"+t,{method:"DELETE"})})).then(function(){t.fetchFiles()})}},created:function(){this.fetchFiles()}}},"H+wM":function(t,e,n){"use strict";function a(t){n("9E6S")}var s=n("+99U"),i=n("LENI"),o=n("VU/8"),r=a,l=o(s.a,i.a,r,"data-v-5ac57ba8",null);e.a=l.exports},LENI:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"show"}},[n("h1",{staticClass:"display-6 mt-3"},[t._v("Rick and Morty")]),t._v(" "),n("ul",{staticClass:"nav nav-pills nav-fill my-4 bg-grey",attrs:{id:"seasons"}},t._l(Object.keys(t.seasons),function(e){return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:t.activeSeason===e},attrs:{href:"#"},on:{click:function(n){t.activeSeason=e}}},[t._v("Season "+t._s(e))])])})),t._v(" "),n("div",{staticClass:"card-deck"},t._l(t.seasons[t.activeSeason],function(t,e){return n("FileCard",{key:e,attrs:{file:t}})}))])},s=[],i={render:a,staticRenderFns:s};e.a=i},M93x:function(t,e,n){"use strict";function a(t){n("eT6w")}var s=n("xJD8"),i=n("abKW"),o=n("VU/8"),r=a,l=o(s.a,i.a,r,null,null);e.a=l.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("M93x"),i=n("YaEn");a.a.config.productionTip=!1,new a.a({el:"#app",router:i.a,template:"<App/>",components:{App:s.a}})},OZz5:function(t,e){},VzcZ:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"upload"}},[n("div",{staticClass:"upload-container"},[n("h2",[t._v("Upload")]),t._v(" "),n("form",{staticClass:"input-group",attrs:{id:"uploadForm",method:"POST",action:"/api",enctype:"multipart/form-data"},on:{submit:function(e){e.preventDefault(),t.handleFormSubmission(e)}}},[n("label",{staticClass:"file"},[n("input",{staticClass:"file-input",attrs:{id:"fileInput",type:"file",multiple:"",name:"video"},on:{change:t.updateFiles}}),t._v(" "),n("span",{staticClass:"file-control"},[t._v(t._s(t.uploadFiles.length?t.uploadFiles.length+" Files":"Choose Files..."))])]),t._v(" "),n("input",{staticClass:"btn btn-primary",attrs:{id:"submit",type:"submit",value:"Submit",disabled:t.submitButtonDisabled}})])]),t._v(" "),n("div",{staticClass:"upload-info"},[n("h4",[n("span",{staticClass:"speed"},[t._v(t._s(t.speed))]),t._v(" "),n("span",{staticClass:"elapsed"},[t._v(t._s(t.elapsed))]),t._v(" "),n("span",{staticClass:"uploaded"},[t._v(t._s(t.uploaded))])]),t._v(" "),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-cyan",style:{width:t.progress+"%"}},[t._v(t._s(t.progress)+"%")])])]),t._v(" "),n("div",{staticClass:"delete-container"},[n("h2",[t._v("Delete")]),t._v(" "),n("div",{staticClass:"input-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.deleteSelect,expression:"deleteSelect"}],staticClass:"videoSelect",attrs:{multiple:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.deleteSelect=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:""}},[t._v("Select Media File...")]),t._v(" "),t._l(t.files,function(t){return n("option",{attrs:{label:t.name},domProps:{value:t.id}})})],2),t._v(" "),n("input",{staticClass:"btn btn-danger",attrs:{id:"deleteSubmitButton",type:"submit",value:"Delete"},on:{click:t.handleDeleteSubmission}})])])])},s=[],i={render:a,staticRenderFns:s};e.a=i},YaEn:function(t,e,n){"use strict";var a=n("7+uW"),s=n("/ocq"),i=n("qSdX"),o=n("jd+X");a.a.use(s.a),e.a=new s.a({mode:"history",routes:[{path:"/",name:"Hello",component:i.a},{path:"/upload",name:"Upload",component:o.a}]})},abKW:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",[n("div",{staticClass:"nav-wrapper"},[n("router-link",{staticClass:"logo",attrs:{to:"/"}},[t._v("Media Server")]),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/"}},[t._v("Files")])],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"/upload"}},[t._v("Upload")])],1)])],1)]),t._v(" "),n("router-view")],1)},s=[],i={render:a,staticRenderFns:s};e.a=i},czmY:function(t,e,n){"use strict";function a(t){n("stt8")}var s=n("hrXf"),i=n("47eL"),o=n("VU/8"),r=a,l=o(s.a,i.a,r,"data-v-1d694a4a",null);e.a=l.exports},eT6w:function(t,e){},hrXf:function(t,e,n){"use strict";var a=n("Xxa5"),s=n.n(a),i=n("exGp"),o=n.n(i),r=this;e.a={name:"FileCard",props:["file"],methods:{pad:function(t){return t<10?"0"+t:t},copy:function(t){var e="http://localhost:3000/api/video/"+t.id,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select();try{var a=document.execCommand("copy"),s=a?"successful":"unsuccessful";console.log("Copying of link was "+s)}catch(t){console.log("Copying of link failed.")}document.body.removeChild(n)},watch:function(){var t=o()(s.a.mark(function t(e){var n,a,i,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/link/"+e.id,t.next=4,fetch(n).then(function(t){return t.blob()});case 4:a=t.sent,i=document.createElement("a"),o=URL.createObjectURL(a),i.href=o,i.download="playlist.vlc",i.click(),URL.revokeObjectURL(o),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,r,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}}},"jd+X":function(t,e,n){"use strict";function a(t){n("2zsr")}var s=n("APWZ"),i=n("VzcZ"),o=n("VU/8"),r=a,l=o(s.a,i.a,r,"data-v-bbc02d20",null);e.a=l.exports},pMZz:function(t,e,n){"use strict";var a=n("H+wM");e.a={name:"hello",components:{Show:a.a},data:function(){return{files:[]}},computed:{shows:function(){return this.files.reduce(function(t,e){return t.hasOwnProperty(e.info.title)?t[e.info.title].push(e):t[e.info.title]=[e],t},{})}},created:function(){var t=this;fetch("/api").then(function(t){return t.json()}).then(function(t){return t.map(function(t){return t.info.summary=t.info.summary.slice(3,t.info.summary.length-4),t})}).then(function(e){return t.files=e})}}},qSdX:function(t,e,n){"use strict";function a(t){n("OZz5")}var s=n("pMZz"),i=n("sx39"),o=n("VU/8"),r=a,l=o(s.a,i.a,r,"data-v-3c71fa33",null);e.a=l.exports},stt8:function(t,e){},sx39:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello container"},t._l(Object.keys(t.shows),function(e,a){return n("Show",{key:a,attrs:{title:e,files:t.shows[e]}})}))},s=[],i={render:a,staticRenderFns:s};e.a=i},xJD8:function(t,e,n){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.ce8051c8df2bba554071.js.map