webpackJsonp([1],{"+99U":function(t,e,n){"use strict";var i=n("fZjL"),a=n.n(i),s=n("czmY");e.a={name:"Show",props:["title","files"],data:function(){return{activeSeason:"1"}},components:{FileCard:s.a},computed:{seasons:function(){var t=this.files.reduce(function(t,e){return t.hasOwnProperty(e.info.season)?t[e.info.season].push(e):t[e.info.season]=[e],t},{});return a()(t).forEach(function(e){t[e]=t[e].sort(function(t,e){return t.info.number-e.info.number})}),t}}}},"2zsr":function(t,e){},"47eL":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-img-top",style:{backgroundImage:"url("+t.file.info.image+")"},attrs:{alt:"episode image"}}),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"main-card-body-wrapper"},[n("p",{staticClass:"card-text"},[t._v("S"+t._s(t.pad(t.file.info.season))+"E"+t._s(t.pad(t.file.info.number)))]),t._v(" "),n("h4",{staticClass:"card-title"},[t._v(t._s(t.file.info.name))]),t._v(" "),n("p",{staticClass:"card-text"},[t._v(t._s(t.file.info.summary))])]),t._v(" "),n("div",{staticClass:"button-group"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(){return t.vlc(t.file)}}},[t._v("VLC")]),t._v(" "),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(){return t.watch(t.file)}}},[t._v("Watch")]),t._v(" "),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(){return t.copy(t.file)}}},[t._v("Copy")])])]),t._v(" "),n("div",{staticClass:"card-footer"},[n("small",{staticClass:"text-muted"},[t._v(t._s((1e-6*t.file.size).toFixed(0))+" MB")])])])},a=[],s={render:i,staticRenderFns:a};e.a=s},"8G4D":function(t,e){},"9E6S":function(t,e){},APWZ:function(t,e,n){"use strict";var i=n("//Fk"),a=n.n(i),s=n("Gu7T"),o=n.n(s),r=function(t){return(1e-6*t).toFixed(2)};e.a={name:"Upload",data:function(){return{deleteSelect:[],files:[],submitButtonDisabled:!1,uploadFiles:[],progress:0,speed:"",elapsed:"",uploaded:""}},methods:{updateFiles:function(t){this.uploadFiles=t.target.files},fetchFiles:function(){var t=this;fetch("/api").then(function(t){return t.json()}).then(function(e){t.files=e})},handleFormSubmission:function(t){var e=this;if(this.uploadFiles.length){var n=Date.now();this.submitButtonDisabled=!0;var i=new FormData,a=new XMLHttpRequest;console.log(this.uploadFiles),[].concat(o()(this.uploadFiles)).forEach(function(t){return i.append("video",t,t.name)}),a.open("POST","/api",!0),a.upload.addEventListener("progress",function(t){if(t.lengthComputable){var i=t.loaded,a=t.total;e.progress=Math.round(100*i/a);var s=(Date.now()-n)/1e3,o=(r(i)/s).toFixed(2);e.speed=o+" MB/s",e.elapsed=s.toFixed(2)+" s";var u=r(i).slice(0,-3),c=r(a).slice(0,-3);e.uploaded=u+" MB of "+c+" MB"}}),["error","abort"].forEach(function(t){return a.upload.addEventListener(t,e.handleFormSubmissionError)}),a.addEventListener("load",function(){e.submitButtonDisabled=!1,e.uploadFiles=[],e.progress=0,e.speed="",e.elapsed="",e.uploaded="",e.fetchFiles()}),a.send(i)}},handleFormSubmissionError:function(t){console.log(t)},handleDeleteSubmission:function(){var t=this;return a.a.all(this.deleteSelect.map(function(t){return fetch("/api/video/"+t,{method:"DELETE"})})).then(function(){t.fetchFiles()})}},created:function(){this.fetchFiles()}}},"H+wM":function(t,e,n){"use strict";function i(t){n("9E6S")}var a=n("+99U"),s=n("LENI"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,"data-v-5ac57ba8",null);e.a=u.exports},Jv72:function(t,e,n){"use strict";function i(t){n("8G4D")}var a=n("Mbx7"),s=n("nCMv"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,null,null);e.a=u.exports},LENI:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"show"}},[n("h1",{staticClass:"display-6 mt-3"},[t._v("Rick and Morty")]),t._v(" "),n("ul",{staticClass:"nav nav-pills nav-fill my-4 bg-grey",attrs:{id:"seasons"}},t._l(Object.keys(t.seasons),function(e){return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:t.activeSeason===e},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.activeSeason=e}}},[t._v("Season "+t._s(e))])])})),t._v(" "),n("div",{staticClass:"card-deck"},t._l(t.seasons[t.activeSeason],function(t,e){return n("FileCard",{key:e,attrs:{file:t}})}))])},a=[],s={render:i,staticRenderFns:a};e.a=s},M93x:function(t,e,n){"use strict";function i(t){n("eT6w")}var a=n("xJD8"),s=n("abKW"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,null,null);e.a=u.exports},Mbx7:function(t,e,n){"use strict";var i=function(t){return t<10?"0"+t:t},a=function(t){var e=t/3600>>0,n=(t-3600*e)/60>>0,a=t-3600*e-60*n>>0;return i(n)+":"+i(a)};e.a={name:"VideoPlayer",props:["id"],data:function(){return{currentTime:0,duration:0,info:{},paused:!1,mousedown:!1}},methods:{handleProgressUpdate:function(t){var e=t.target;this.currentTime=e.currentTime,this.duration=e.duration},handlePlayToggle:function(){var t=this.$el.querySelector("video.viewer");t[t.paused?"play":"pause"]()},handlePlayingEvent:function(t){var e=t.target;this.paused=e.paused},handleRangeUpdate:function(t){this.$el.querySelector("video.viewer")[t.target.name]=t.target.value},handleFullscreenToggle:function(){document.webkitFullscreenElement?document.webkitExitFullscreen():this.$refs.player.webkitRequestFullscreen()},scrub:function(t){var e=this.$el.querySelector("video.viewer");e.currentTime=t.offsetX/this.$el.querySelector(".progress").offsetWidth*e.duration}},computed:{progress:function(){return this.currentTime/this.duration*100},time:function(){return a(this.currentTime)+" / "+a(this.duration)},title:function(){var t=this.info.title,e=this.info.name;return t+" - S"+i(this.info.season)+"E"+i(this.info.number)+" - "+e}},created:function(){var t=this;fetch("/api/video/info/"+this.id).then(function(t){return t.json()}).then(function(e){t.info=e.result.info})}}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a=n("M93x"),s=n("YaEn");i.a.config.productionTip=!1,new i.a({el:"#app",router:s.a,template:"<App/>",components:{App:a.a}})},OZz5:function(t,e){},VzcZ:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"upload"}},[n("div",{staticClass:"upload-container"},[n("h2",[t._v("Upload")]),t._v(" "),n("form",{staticClass:"input-group",attrs:{id:"uploadForm",method:"POST",action:"/api",enctype:"multipart/form-data"},on:{submit:function(e){e.preventDefault(),t.handleFormSubmission(e)}}},[n("label",{staticClass:"file"},[n("input",{staticClass:"file-input",attrs:{id:"fileInput",type:"file",multiple:"",name:"video"},on:{change:t.updateFiles}}),t._v(" "),n("span",{staticClass:"file-control"},[t._v(t._s(t.uploadFiles.length?t.uploadFiles.length+" Files":"Choose Files..."))])]),t._v(" "),n("input",{staticClass:"btn btn-primary",attrs:{id:"submit",type:"submit",value:"Submit",disabled:t.submitButtonDisabled}})])]),t._v(" "),n("div",{staticClass:"upload-info"},[n("h4",[n("span",{staticClass:"speed"},[t._v(t._s(t.speed))]),t._v(" "),n("span",{staticClass:"elapsed"},[t._v(t._s(t.elapsed))]),t._v(" "),n("span",{staticClass:"uploaded"},[t._v(t._s(t.uploaded))])]),t._v(" "),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar bg-cyan",style:{width:t.progress+"%"}},[t._v(t._s(t.progress)+"%")])])]),t._v(" "),n("div",{staticClass:"delete-container"},[n("h2",[t._v("Delete")]),t._v(" "),n("div",{staticClass:"input-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.deleteSelect,expression:"deleteSelect"}],staticClass:"videoSelect",attrs:{multiple:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.deleteSelect=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:""}},[t._v("Select Media File...")]),t._v(" "),t._l(t.files,function(t){return n("option",{attrs:{label:t.name},domProps:{value:t.id}})})],2),t._v(" "),n("input",{staticClass:"btn btn-danger",attrs:{id:"deleteSubmitButton",type:"submit",value:"Delete"},on:{click:t.handleDeleteSubmission}})])])])},a=[],s={render:i,staticRenderFns:a};e.a=s},YaEn:function(t,e,n){"use strict";var i=n("7+uW"),a=n("/ocq"),s=n("qSdX"),o=n("jd+X"),r=n("Jv72");i.a.use(a.a),e.a=new a.a({mode:"history",routes:[{path:"/",name:"Hello",component:s.a},{path:"/upload",name:"Upload",component:o.a},{path:"/video/:id",name:"VideoPlayer",component:r.a,props:!0}]})},abKW:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("nav",[i("div",{staticClass:"nav-wrapper"},[i("router-link",{staticClass:"logo",attrs:{to:"/"}},[i("img",{attrs:{src:n("sZkz"),width:"30",height:"30"}})]),t._v(" "),i("ul",[i("li",[i("router-link",{attrs:{to:"/"}},[t._v("Files")])],1),t._v(" "),i("li",[i("router-link",{attrs:{to:"/upload"}},[t._v("Upload")])],1)])],1)]),t._v(" "),i("router-view")],1)},a=[],s={render:i,staticRenderFns:a};e.a=s},czmY:function(t,e,n){"use strict";function i(t){n("stt8")}var a=n("hrXf"),s=n("47eL"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,"data-v-1d694a4a",null);e.a=u.exports},eT6w:function(t,e){},hrXf:function(t,e,n){"use strict";var i=n("Xxa5"),a=n.n(i),s=n("exGp"),o=n.n(s),r=this;e.a={name:"FileCard",props:["file"],methods:{pad:function(t){return t<10?"0"+t:t},watch:function(t){this.$router.push("/video/"+t.id)},copy:function(t){var e=t.protocol+"://"+t.addr+"/api/video/"+t.id,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select();try{var i=document.execCommand("copy"),a=i?"successful":"unsuccessful";console.log("Copying of link was "+a)}catch(t){console.log("Copying of link failed.")}document.body.removeChild(n)},vlc:function(){var t=o()(a.a.mark(function t(e){var n,i,s,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/link/"+e.id,t.next=4,fetch(n).then(function(t){return t.blob()});case 4:i=t.sent,s=document.createElement("a"),o=URL.createObjectURL(i),s.href=o,s.download="playlist.vlc",s.click(),URL.revokeObjectURL(o),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,r,[[0,13]])}));return function(e){return t.apply(this,arguments)}}(),transcode:function(t){var e="http://192.168.1.12:3000/api/video/transcode/"+t.id,n=document.createElement("a");n.href=e,n.target="_blank",n.click()}}}},"jd+X":function(t,e,n){"use strict";function i(t){n("2zsr")}var a=n("APWZ"),s=n("VzcZ"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,"data-v-bbc02d20",null);e.a=u.exports},nCMv:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"videoPlayer"}},[n("div",{ref:"player",staticClass:"player"},[n("video",{ref:"video",staticClass:"viewer",attrs:{src:"/api/video/"+t.id,autoplay:"",type:"video/mp4"},on:{timeupdate:t.handleProgressUpdate,play:t.handlePlayingEvent,pause:t.handlePlayingEvent}}),t._v(" "),n("div",{staticClass:"controls"},[n("div",{staticClass:"progress",on:{click:t.scrub}},[n("div",{staticClass:"progress-filled",style:{flexBasis:t.progress+"%"}})]),t._v(" "),n("div",{staticClass:"btn player-button toggle",on:{click:t.handlePlayToggle}},[t._v(t._s(t.paused?"►":"❚ ❚"))]),t._v(" "),n("div",{staticClass:"btn player-button time-info"},[t._v(t._s(t.time))]),t._v(" "),n("div",{staticClass:"btn player-button fullscreen",on:{click:t.handleFullscreenToggle}},[t._v("")]),t._v(" "),n("div",{staticClass:"btn player-button title"},[t._v(t._s(t.title))])])])])},a=[],s={render:i,staticRenderFns:a};e.a=s},pMZz:function(t,e,n){"use strict";var i=n("H+wM");e.a={name:"hello",components:{Show:i.a},data:function(){return{files:[]}},computed:{shows:function(){return this.files.reduce(function(t,e){return t.hasOwnProperty(e.info.title)?t[e.info.title].push(e):t[e.info.title]=[e],t},{})}},created:function(){var t=this;fetch("/api").then(function(t){return t.json()}).then(function(t){return t.map(function(t){return t.info.summary=t.info.summary.slice(3,t.info.summary.length-4),t})}).then(function(e){return t.files=e})}}},qSdX:function(t,e,n){"use strict";function i(t){n("OZz5")}var a=n("pMZz"),s=n("sx39"),o=n("VU/8"),r=i,u=o(a.a,s.a,r,"data-v-3c71fa33",null);e.a=u.exports},sZkz:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KCTxnPjwvZz4KCTxwYXRoIGQ9Ik0yNjguMjc4IDEzNy40bC0xMC4zODQtOS45NjMtMTAuMDM1IDEwLjMzMmM1LjU1LTUuNzE0IDE0LjY1My01Ljg3OCAyMC40MTktMC4zNjl6IiBmaWxsPSIjZmZmIi8+Cgk8cGF0aAoJCWQ9Ik0yNTguMjMzIDE0My4zODFjMS41MDUgMCAyLjk4IDAgNC40NjQgMCA1LjgwNiAwLjU4MyAxMS4wOTAgMi4zMDQgMTUuNDQyIDQuNzQxbDkzLjI0NS05NS44OTdjNS41Ni01Ljc0NSA1LjQzOC0xNC44ODktMC4yOTctMjAuNS01Ljc0NS01LjU0LTE0LjkxOS01LjQzOC0yMC41IDAuMzE3bC05Mi42ODIgOTUuMzk2IDEwLjM4NCA5Ljk2NGMtNS43NjUtNS41MDktMTQuODc5LTUuMzQ1LTIwLjQyOSAwLjM2OWwxMC4wMzUtMTAuMzMyLTEwMi43OTktOTguNzQ1Yy01Ljc2NS01LjU0LTE0LjkzLTUuMzY2LTIwLjQ4IDAuNDEtNS41MTkgNS43NzYtNS4zMzUgMTQuOTUgMC40MiAyMC41bDEwMy4xMDcgOTkuMDAxYzQuMTc4LTIuNzAzIDkuNDcyLTQuNjE4IDE1LjYyNi01LjIyMiAxLjQ3NSAwIDIuOTggMCA0LjQ2NSAweiIKCQlmaWxsPSIjZmZmIi8+Cgk8cGF0aAoJCWQ9Ik0zOTYuNzM4IDE2Ny4xOThoLTEwNy4yNDNjMC0xLjQ5NSAwLTIuOTggMC0yLjk4IDAtNi4zOC00LjQ4NS0xMi4xOTYtMTEuMzU2LTE2LjA5N2wtOS41MDIgOS44MWMtNS41ODEgNS43MjQtMTQuNzA0IDUuODc4LTIwLjQyOSAwLjM0OGwtMTAuMDY2LTkuNjc3Yy02LjAxMSAzLjg4MS05LjY4NyA5LjQ5My05LjY4NyAxNS42MTYgMCAwIDAgMS40OTUgMCAyLjk4aC0xMTMuMTYyYy0zMi43ODggMC01OS41NzcgMjYuODA5LTU5LjU3NyA1OS41NTZ2MTg5LjE1NGMwIDM0LjI0MyAyNi43ODggNjEuMDYxIDU5LjU3NyA2MS4wNjFoNy40MjR2MTAuMzg0aDI2OS41Mjd2LTEwLjM4NGg0LjQ5NWMzMi43NTggMCA1OS41MzYtMjYuODE5IDU5LjUzNi02MS4wNjF2LTE4OS4xNDNjMC4wMTAtMzIuNzU4LTI2Ljc3Ny01OS41NjYtNTkuNTM2LTU5LjU2NnpNMzcwLjc2IDQ3Ni4xMDljLTcuODAzIDAtMTQuMTIxLTYuMzM5LTE0LjEyMS0xNC4xNjJzNi4zMTgtMTQuMTIxIDE0LjEyMS0xNC4xMjFjNy44MjQgMCAxNC4xNDIgNi4yOTggMTQuMTQyIDE0LjEyMXMtNi4zMTggMTQuMTYyLTE0LjE0MiAxNC4xNjJ6TTQwNy4xNjMgMzkzLjU3NWMwIDI1LjMwMy0yMC44MzkgNDQuNjc3LTQ0LjY3NyA0NC42NzdoLTIxMi45NDFjLTI1LjMxNCAwLTQ0LjY4OC0xOS4zODUtNDQuNjg4LTQ0LjY3N3YtMTQyLjk3MWMwLTI1LjMxNCAxOS4zODUtNDYuMTcyIDQ0LjY4OC00Ni4xNzJoMjEyLjkzMWMyMy44MzkgMCA0NC42NzcgMjAuODU5IDQ0LjY3NyA0Ni4xNzJ2MTQyLjk3MXoiCgkJZmlsbD0iI2ZmZiIvPgoJPHBhdGggZD0iTTI2OC42MzYgMTU3LjkzMWw5LjUwMi05LjgxYy00LjM2Mi0yLjQ0Ny05LjYzNi00LjE2Ny0xNS40NDItNC43NDEtMS40ODUgMC0yLjk0OSAwLTQuNDY0IDAtMS40OTUgMC0yLjk5IDAtNC40NjQgMC02LjE2NSAwLjYxNC0xMS40NDggMi41MTktMTUuNjI2IDUuMjIybDEwLjA2NiA5LjY3N2M1LjcyNCA1LjUzIDE0Ljg0OCA1LjM3NiAyMC40MjktMC4zNDh6IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo="},stt8:function(t,e){},sx39:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello container-fluid"},t._l(Object.keys(t.shows),function(e,i){return n("Show",{key:i,attrs:{title:e,files:t.shows[e]}})}))},a=[],s={render:i,staticRenderFns:a};e.a=s},xJD8:function(t,e,n){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.388a6041510a486d071d.js.map